"use strict";(self.webpackChunk_miq_clientjs=self.webpackChunk_miq_clientjs||[]).push([[603],{6550:function(e,t,n){n.d(t,{Q:function(){return p}});var r=n(8519),a=n(8312),i=n(6572);var s=n(1036);function l(e){return function(e){if(Array.isArray(e))return(0,i.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,s.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=n(6009),c=n(3877),o=["append"],d={refreshDeps:[]},m={loading:!0,status:null,statusText:null,config:null,data:null,headers:null,request:null};function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,n=(0,c.useReducer)(f,m),r=(0,u.Z)(n,2),a=r[0],i=r[1],s=(0,c.useRef)(!0),o=t.onSuccess,p=t.onError,h=(0,c.useMemo)((function(){return function(){return i({type:"LOADING"}),e().then((function(e){if(!s.current)return null;i({type:"SET_RES",payload:e}),null===o||void 0===o||o(e)})).catch((function(e){if(!s.current)return null;i({type:"SET_ERR",payload:e}),null===p||void 0===p||p(e)}))}}),[e,o,p]),x=t.refreshDeps,Z=(0,c.useMemo)((function(){return Array.isArray(x)?[].concat(l(x),[h]):[h]}),x);return(0,c.useEffect)((function(){h()}),Z),(0,c.useEffect)((function(){return function(){s.current=!1}}),[s]),{res:a,loading:a.loading,addItem:function(e){return i({type:"ADD_ITEM",payload:e})},updateItem:function(e){return i({type:"UPDATE_ITEM",payload:e})},removeItem:function(e){return i({type:"REMOVE_ITEM",payload:e})},updateData:function(e){return i({type:"UPDATE_DATA",payload:e})},setData:function(e){return i({type:"SET_DATA",payload:e})},removeData:function(){return i({type:"REMOVE_DATA"})},setLoading:function(){return i({type:"LOADING"})},setRes:function(e){return i({type:"SET_RES",payload:e})},setError:function(e){return i({type:"SET_ERR",payload:e})},refresh:h}}var h=function(e,t){return Object.keys(e).includes("".concat(t))},f=function(e,t){var n,i,s=t.type,u=t.payload;switch(s){case"ADD_ITEM":if(n=e.data,h(n,"results")){var c=u.append,d=(0,a.Z)(u,o);i=c?[].concat(l(n.results),[d]):[d].concat(l(n.results)),n=(0,r.Z)((0,r.Z)({},e.data),{},{results:i,count:null==e.data.count?1:e.data.count+1})}return(0,r.Z)((0,r.Z)({},e),{},{data:n});case"UPDATE_ITEM":return n=e.data,h(n,"results")&&(i=n.results.map((function(e){return e.slug===u.slug?u:e})),n=(0,r.Z)((0,r.Z)({},e.data),{},{results:i})),(0,r.Z)((0,r.Z)({},e),{},{data:n});case"REMOVE_ITEM":return n=e.data,h(n,"results")&&(i=n.results.filter((function(e){return e.slug!==u.slug})),n=(0,r.Z)((0,r.Z)({},e.data),{},{results:i})),(0,r.Z)((0,r.Z)({},e),{},{data:n});case"UPDATE_DATA":return(0,r.Z)((0,r.Z)({},e),{},{data:(0,r.Z)((0,r.Z)({},e.data),u)});case"SET_DATA":return(0,r.Z)((0,r.Z)({},e),{},{data:u});case"REMOVE_DATA":return(0,r.Z)((0,r.Z)({},e),{},{data:null});case"LOADING":return(0,r.Z)((0,r.Z)({},e),{},{loading:!0});case"SET_RES":case"SET_ERR":return(0,r.Z)((0,r.Z)((0,r.Z)({},e),u),{},{loading:!1});default:return(0,r.Z)({},e)}}},6603:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(8312),a=n(8519),i=n(3877),s=n(8069),l=n(6550),u=n(2076),c=n(7864),o=n(5629),d=n(135),m=["children","settingSlug","instance","form","fields"],p=["contact_number","contact_number_title","contact_number_display","contact_email"],h=["whatsapp_link","whatsapp_link_title"],f=["ga_tracking","fb_pixel"],x=[].concat(p,h,f),Z=function(e){return Object.assign({},(0,o.nB)(e,"settings/"),{patchSite:function(e){return this.patchPath("".concat(this._path,"site/"),e)}})};function y(e){var t=i.useContext(c.h).site,n=t.settings,r=(0,u.cI)(E({})),m=(0,l.Q)((function(){return Z({slug:n}).detail()}),{refreshDeps:[n],onSuccess:function(e){var t=e.data;return r.setValues(E(t))}}),p=m.res,h=m.updateData,f=new o.HM(p);if(!f.isSuccess)return null;var x=Z(f.data),y={settingSlug:n,instance:x,form:r,res:p,updateData:h,site:t};return(0,d.jsxs)(s.Z.View,{title:"Site General Settings",back:"settings/",children:[(0,d.jsx)("div",{className:"d-grid grid-md-5 gap-2",children:(0,d.jsx)(s.Z.Section,{title:"Site Details",className:"span-md-3",children:(0,d.jsx)(v,(0,a.Z)({},y))})}),(0,d.jsxs)("div",{children:[(0,d.jsx)(s.Z.Section,{title:"Contact",text:"What's the best way to contact you?",children:(0,d.jsx)(b,(0,a.Z)({},y))}),(0,d.jsx)(s.Z.Section,{title:"Whatsapp",text:"A whatsapp icon will be added to your site.",children:(0,d.jsx)(_,(0,a.Z)({},y))}),(0,d.jsx)(s.Z.Section,{title:"Analytics",text:"Set up third-party analytics.",children:(0,d.jsx)(g,(0,a.Z)({},y))}),(0,d.jsx)(s.Z.Section,{title:"Social",text:"Display Your social media accounts. Comin Soon ..."})]})]})}var b=function(e){var t=e.form;return t?(0,d.jsxs)(j,(0,a.Z)((0,a.Z)({},e),{},{fields:p,children:[(0,d.jsx)(u.ZP.Field,{label:"Phone number",text:"Write your (business) contact number without country extension.",error:t.errors.contact_number}),(0,d.jsx)(u.ZP.Field,{label:"Phone number display",text:"Write a call to action for your contact number.",error:t.errors.contact_number_display,children:(0,d.jsx)(u.ZP.Text,{required:e.required,name:"contact_number_display",placeholder:"Call us now",maxLength:99,className:"w-100 w-md-50"})}),(0,d.jsx)(u.ZP.Field,{label:"Phone number link text",text:"Describe your phone number link (SEO).",error:t.errors.contact_number_title,children:(0,d.jsx)(u.ZP.Text,{name:"contact_number_title",className:"w-100 w-md-50",maxLength:99})}),(0,d.jsx)(u.ZP.Field,{label:"Email",text:"Write your (business) contact email.",error:t.errors.contact_email,children:(0,d.jsx)(u.ZP.Text,{name:"contact_email",type:"email",className:"w-100 w-md-50",maxLength:99})})]})):null},_=function(e){var t=e.form;return(0,d.jsxs)(j,(0,a.Z)((0,a.Z)({},e),{},{fields:h,error:t.errors.whatsapp_link,children:[(0,d.jsx)(u.ZP.Field,{label:"Whatsapp link",text:"Write your whatsapp link.",children:(0,d.jsx)(u.ZP.Text,{name:"whatsapp_link",type:"url",maxLength:200,className:"w-100 w-md-50"})}),(0,d.jsx)(u.ZP.Field,{label:"Whatsapp link text",text:"Describe your whatsapp link.",error:t.errors.whatsapp_link_title,children:(0,d.jsx)(u.ZP.Text,{name:"whatsapp_link_title",className:"w-100 w-md-50",maxLength:99})})]}))},g=function(e){var t=e.form;return(0,d.jsxs)(j,(0,a.Z)((0,a.Z)({},e),{},{fields:f,error:t.errors.ga_tracking,children:[(0,d.jsx)(u.ZP.Field,{label:"Google Analytics Tracking Number",children:(0,d.jsx)(u.ZP.Text,{name:"ga_tracking",className:"w-100 w-md-50",placeholder:"G-"})}),(0,d.jsx)(u.ZP.Field,{label:"Facebook Pixel",error:t.errors.fb_pixel,children:(0,d.jsx)(u.ZP.Text,{name:"fb_pixel",className:"w-100 w-md-50"})})]}))},j=function(e){var t=e.children,n=e.settingSlug,a=e.instance,i=e.form,s=e.fields,l=(0,r.Z)(e,m);if(!n||!i||!Array.isArray(s))return null;var c=l.updateData;return(0,d.jsxs)(u.ZP,{context:i,onSubmit:function(e){e.preventDefault();var t={};return s.forEach((function(e){t[e]=i.values[e]})),a.patch(t).then((function(e){var t=e.data;null===c||void 0===c||c(t)})).catch((function(e){i.handleError(e)}))},children:[t,(0,d.jsx)("div",{className:"mt-1",children:(0,d.jsx)(u.ZP.Submit,{value:"Save",className:"btn-md btn-primary-3 min-w-25"})})]})},v=function(e){var t=i.useContext(c.h),n=t.site,r=(0,u.cI)({name:n.name,domain:n.domain}),a=e.instance,s=!Boolean(n.settings);return(0,d.jsxs)(u.ZP,{context:r,onSubmit:function(e){return e.preventDefault(),a.patchSite({name:r.values.name,domain:r.values.domain},{name:n.name,domain:n.domain}).then((function(e){t.updateSite(e.data.site)})).catch((function(e){return r.handleError(e)}))},children:[(0,d.jsx)(u.ZP.Field,{label:"Site name",text:"Give a name to your site. Keep it short and clean.(65 Characters max.)",error:r.errors.name,children:(0,d.jsx)(u.ZP.Text,{required:!0,name:"name",placeholder:"example",maxLength:65,minLength:2,disabled:s,className:"w-100 w-md-50"})}),(0,d.jsx)(u.ZP.Field,{label:"Site domain",text:"Enter your domain name url. Include the http(s) part.",error:r.errors.domain,children:(0,d.jsx)(u.ZP.Text,{required:!0,type:"url",name:"domain",maxLength:99,placeholder:"http(s)://example.com",minLength:3,disabled:s})}),(0,d.jsx)("div",{className:"",children:(0,d.jsx)(u.ZP.Submit,{value:"Save",className:"btn-md btn-primary-3 min-w-25"})})]})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return x.forEach((function(n){t[n]=e[n]||""})),t}}}]);
//# sourceMappingURL=603.a80a9587.chunk.js.map