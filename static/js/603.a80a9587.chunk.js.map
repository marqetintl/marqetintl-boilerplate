{"version":3,"file":"static/js/603.a80a9587.chunk.js","mappings":"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","sources":["../../../../.yarn/cache/@babel-runtime-npm-7.17.2-ec60bc114d-a48702d271.zip/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../../../../.yarn/cache/@babel-runtime-npm-7.17.2-ec60bc114d-a48702d271.zip/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../../../../.yarn/cache/@babel-runtime-npm-7.17.2-ec60bc114d-a48702d271.zip/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../../../../.yarn/cache/@babel-runtime-npm-7.17.2-ec60bc114d-a48702d271.zip/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../../../../packages/miq-hookjs/src/index.tsx","../../../../packages/miq-staffjs/src/Setting/GeneralUpdateView.tsx"],"sourcesContent":["import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import { useEffect, useMemo, useReducer, useRef } from 'react';\n\n// https://elijahmanor.com/blog/react-blessed-userequest\n\n// https://hooks.umijs.org/hooks/async#refreshdeps\n// https://github.com/alibaba/hooks/blob/master/packages/hooks/src/useRequest/src/useRequestImplement.ts\n\nexport type baseOptionsType = {\n  refreshDeps?: any[];\n  onSuccess?: (res?: any) => void;\n  onError?: (errRes?: any) => void;\n};\nconst baseOptions: baseOptionsType = {\n  refreshDeps: [],\n};\n\nconst defaultResponse = {\n  loading: true,\n  status: null,\n  statusText: null,\n  config: null,\n  data: null,\n  headers: null,\n  request: null,\n};\n\nexport function useRequest(service: Function, options = baseOptions) {\n  const [res, dispatch] = useReducer(responseReducer, defaultResponse);\n  const isMountedRef = useRef(true);\n\n  const { onSuccess, onError } = options;\n  const makeRequest = useMemo(\n    () => () => {\n      dispatch({ type: 'LOADING' });\n\n      return service()\n        .then((payload) => {\n          if (!isMountedRef.current) return null;\n          dispatch({ type: 'SET_RES', payload });\n          onSuccess?.(payload);\n        })\n        .catch((err) => {\n          if (!isMountedRef.current) return null;\n          dispatch({ type: 'SET_ERR', payload: err });\n          onError?.(err);\n          // throw err;\n        });\n    },\n    [service, onSuccess, onError]\n  );\n\n  const { refreshDeps } = options;\n\n  const deps = useMemo(() => {\n    if (Array.isArray(refreshDeps)) {\n      return [...refreshDeps, makeRequest];\n    }\n    return [makeRequest];\n  }, refreshDeps);\n\n  // console.log(refreshDeps, deps);\n\n  useEffect(() => {\n    makeRequest();\n  }, deps);\n\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, [isMountedRef]);\n\n  return {\n    res: res,\n    loading: res.loading,\n\n    addItem: (payload: any) => dispatch({ type: 'ADD_ITEM', payload }),\n    updateItem: (payload: any) => dispatch({ type: 'UPDATE_ITEM', payload }),\n    removeItem: (payload: any) => dispatch({ type: 'REMOVE_ITEM', payload }),\n\n    updateData: (payload: any) => dispatch({ type: 'UPDATE_DATA', payload }),\n    setData: (payload: any) => dispatch({ type: 'SET_DATA', payload }),\n    removeData: () => dispatch({ type: 'REMOVE_DATA' }),\n\n    setLoading: () => dispatch({ type: 'LOADING' }),\n    setRes: (payload: any) => dispatch({ type: 'SET_RES', payload }),\n    setError: (payload: any) => dispatch({ type: 'SET_ERR', payload }),\n\n    refresh: makeRequest,\n  };\n}\n\nconst hasKey = (obj, key) => Object.keys(obj).includes(`${key}`);\n\nconst responseReducer = (state: typeof defaultResponse, action): typeof defaultResponse => {\n  const { type, payload } = action;\n  let data, results;\n\n  switch (type) {\n    case 'ADD_ITEM':\n      data = state.data;\n      if (hasKey(data, 'results')) {\n        const { append, ...rest } = payload;\n        if (append) results = [...data.results, rest];\n        else results = [rest, ...data.results];\n\n        data = { ...state.data, results, count: state.data.count == null ? 1 : state.data.count + 1 };\n      }\n      return { ...state, data };\n    case 'UPDATE_ITEM':\n      data = state.data;\n      if (hasKey(data, 'results')) {\n        results = data.results.map((i) => {\n          if (i.slug === payload.slug) return payload;\n          return i;\n        });\n        data = { ...state.data, results };\n      }\n      return { ...state, data };\n    case 'REMOVE_ITEM':\n      data = state.data;\n      if (hasKey(data, 'results')) {\n        results = data.results.filter((i) => i.slug !== payload.slug);\n        data = { ...state.data, results };\n      }\n      return { ...state, data };\n\n    case 'UPDATE_DATA':\n      return { ...state, data: { ...state.data, ...payload } };\n    case 'SET_DATA':\n      return { ...state, data: payload };\n    case 'REMOVE_DATA':\n      return { ...state, data: null };\n\n    case 'LOADING':\n      return { ...state, loading: true };\n\n    case 'SET_RES':\n    case 'SET_ERR':\n      return { ...state, ...payload, loading: false };\n\n    default:\n      return { ...state };\n  }\n};\n","import * as React from 'react';\n\nimport Staff from '..';\nimport { useRequest } from '@miq/hookjs';\nimport Form, { useForm } from '@miq/formjs';\nimport { SharedDataCtx, SharedDataState } from '@miq/contextjs';\nimport { StaffCrudModel, Response } from '@miq/utiljs';\n\n//#region SettingModel\n\nconst contactFields = ['contact_number', 'contact_number_title', 'contact_number_display', 'contact_email'];\nconst whaFields = ['whatsapp_link', 'whatsapp_link_title'];\nconst analyticsFields = ['ga_tracking', 'fb_pixel'];\nconst fields = [...contactFields, ...whaFields, ...analyticsFields];\n\nconst Setting = (data: any) => {\n  function patchSite(values: any) {\n    return this.patchPath(`${this._path}site/`, values);\n  }\n  return Object.assign({}, StaffCrudModel(data, 'settings/'), { patchSite });\n};\n\n//#endregion SettingModel\n\n//#region GeneralSettingUpdateView\n\nexport default function GeneralSettingUpdateView(props: any) {\n  const { site } = React.useContext<SharedDataState>(SharedDataCtx);\n  const settingSlug = site.settings;\n\n  const form = useForm(mapDataToFormValues({}));\n  const { res, updateData } = useRequest(() => Setting({ slug: settingSlug }).detail(), {\n    refreshDeps: [settingSlug],\n    onSuccess: ({ data }) => form.setValues(mapDataToFormValues(data)),\n  });\n\n  const r = new Response(res);\n  if (!r.isSuccess) return null;\n\n  const instance = Setting(r.data);\n  const sharedProps = { settingSlug, instance, form, res, updateData, site };\n\n  return (\n    <Staff.View title=\"Site General Settings\" back=\"settings/\">\n      <div className=\"d-grid grid-md-5 gap-2\">\n        <Staff.Section title=\"Site Details\" className=\"span-md-3\">\n          <SiteUpdateForm {...sharedProps} />\n        </Staff.Section>\n      </div>\n\n      <div>\n        <Staff.Section title=\"Contact\" text=\"What's the best way to contact you?\">\n          <ContactForm {...sharedProps} />\n        </Staff.Section>\n\n        <Staff.Section title=\"Whatsapp\" text=\"A whatsapp icon will be added to your site.\">\n          <WhatsappForm {...sharedProps} />\n        </Staff.Section>\n\n        <Staff.Section title=\"Analytics\" text=\"Set up third-party analytics.\">\n          <AnalyticsForm {...sharedProps} />\n        </Staff.Section>\n\n        <Staff.Section title=\"Social\" text=\"Display Your social media accounts. Comin Soon ...\" />\n      </div>\n    </Staff.View>\n  );\n}\n\n//#endregion GeneralSettingUpdateView\n\n//#region SettingForms\n\nconst ContactForm = (props: any) => {\n  const { form } = props;\n  if (!form) return null;\n\n  return (\n    <SettingForm {...props} fields={contactFields}>\n      <Form.Field\n        label=\"Phone number\"\n        text=\"Write your (business) contact number without country extension.\"\n        error={form.errors.contact_number}\n      >\n        {/* <PhoneInput\n          required={props.required}\n          name=\"contact_number\"\n          \n          className=\"w-100 w-md-50\"\n        /> */}\n      </Form.Field>\n\n      <Form.Field\n        label=\"Phone number display\"\n        text=\"Write a call to action for your contact number.\"\n        error={form.errors.contact_number_display}\n      >\n        <Form.Text\n          required={props.required}\n          name=\"contact_number_display\"\n          placeholder=\"Call us now\"\n          maxLength={99}\n          className=\"w-100 w-md-50\"\n        />\n      </Form.Field>\n\n      <Form.Field\n        label=\"Phone number link text\"\n        text=\"Describe your phone number link (SEO).\"\n        error={form.errors.contact_number_title}\n      >\n        <Form.Text name=\"contact_number_title\" className=\"w-100 w-md-50\" maxLength={99} />\n      </Form.Field>\n\n      <Form.Field label=\"Email\" text=\"Write your (business) contact email.\" error={form.errors.contact_email}>\n        <Form.Text name=\"contact_email\" type=\"email\" className=\"w-100 w-md-50\" maxLength={99} />\n      </Form.Field>\n    </SettingForm>\n  );\n};\n\nconst WhatsappForm = (props: any) => {\n  const { form } = props;\n  return (\n    <SettingForm {...props} fields={whaFields} error={form.errors.whatsapp_link}>\n      <Form.Field label=\"Whatsapp link\" text=\"Write your whatsapp link.\">\n        <Form.Text name=\"whatsapp_link\" type=\"url\" maxLength={200} className=\"w-100 w-md-50\" />\n      </Form.Field>\n      <Form.Field\n        label=\"Whatsapp link text\"\n        text=\"Describe your whatsapp link.\"\n        error={form.errors.whatsapp_link_title}\n      >\n        <Form.Text name=\"whatsapp_link_title\" className=\"w-100 w-md-50\" maxLength={99} />\n      </Form.Field>\n    </SettingForm>\n  );\n};\n\nconst AnalyticsForm = (props: any) => {\n  const { form } = props;\n  return (\n    <SettingForm {...props} fields={analyticsFields} error={form.errors.ga_tracking}>\n      <Form.Field label=\"Google Analytics Tracking Number\">\n        <Form.Text name=\"ga_tracking\" className=\"w-100 w-md-50\" placeholder=\"G-\" />\n      </Form.Field>\n\n      <Form.Field label=\"Facebook Pixel\" error={form.errors.fb_pixel}>\n        <Form.Text name=\"fb_pixel\" className=\"w-100 w-md-50\" />\n      </Form.Field>\n    </SettingForm>\n  );\n};\n\nconst SettingForm = ({ children, settingSlug, instance, form, fields, ...props }: any) => {\n  if (!settingSlug || !form || !Array.isArray(fields)) return null;\n\n  const { updateData } = props;\n\n  const handleSubmit = (e: any) => {\n    e.preventDefault();\n\n    const values: any = {};\n\n    fields.forEach((field) => {\n      values[field] = form.values[field];\n    });\n\n    return instance\n      .patch(values)\n      .then(({ data }: any) => {\n        updateData?.(data);\n        // toast.success.({ message: 'Site updated.' });\n      })\n      .catch((err: any) => {\n        form.handleError(err);\n      });\n  };\n\n  return (\n    <Form context={form} onSubmit={handleSubmit}>\n      {children}\n      <div className=\"mt-1\">\n        <Form.Submit value=\"Save\" className=\"btn-md btn-primary-3 min-w-25\" />\n      </div>\n    </Form>\n  );\n};\n\n//#endregion SettingForms\n\n//#region SiteUpdateForm\n\nconst SiteUpdateForm = (props: any) => {\n  const ctx = React.useContext(SharedDataCtx);\n  const { site } = ctx;\n  const form = useForm({ name: site.name, domain: site.domain });\n\n  const { instance } = props;\n\n  const handleSubmit = (e: any) => {\n    e.preventDefault();\n    return instance\n      .patchSite({ name: form.values.name, domain: form.values.domain }, { name: site.name, domain: site.domain })\n      .then((res) => {\n        ctx.updateSite(res.data.site);\n        // toast.success({ message: 'Site updated.' });\n      })\n      .catch((err) => form.handleError(err));\n  };\n\n  const disabled = !Boolean(site.settings);\n\n  return (\n    <Form context={form} onSubmit={handleSubmit}>\n      <Form.Field\n        label=\"Site name\"\n        text=\"Give a name to your site. Keep it short and clean.(65 Characters max.)\"\n        error={form.errors.name}\n      >\n        <Form.Text\n          required\n          name=\"name\"\n          placeholder={'example'}\n          maxLength={65}\n          minLength={2}\n          disabled={disabled}\n          className=\"w-100 w-md-50\"\n        />\n      </Form.Field>\n\n      <Form.Field\n        label=\"Site domain\"\n        text=\"Enter your domain name url. Include the http(s) part.\"\n        error={form.errors.domain}\n      >\n        <Form.Text\n          required\n          type=\"url\"\n          name=\"domain\"\n          maxLength={99}\n          placeholder={'http(s)://example.com'}\n          minLength={3}\n          disabled={disabled}\n        />\n      </Form.Field>\n\n      <div className=\"\">\n        <Form.Submit value=\"Save\" className=\"btn-md btn-primary-3 min-w-25\" />\n      </div>\n    </Form>\n  );\n};\n\n//#endregion SiteUpdateForm\n\n//#region HELPERS\n\nconst mapDataToFormValues = (data: any = {}) => {\n  const values: any = {};\n  fields.forEach((field) => {\n    values[field] = data[field] || '';\n  });\n  return values;\n};\n\n//#endregion HELPERS\n"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","from","unsupportedIterableToArray","TypeError","baseOptions","refreshDeps","defaultResponse","loading","status","statusText","config","data","headers","request","useRequest","service","options","useReducer","responseReducer","res","dispatch","isMountedRef","useRef","onSuccess","onError","makeRequest","useMemo","type","then","payload","current","catch","err","deps","useEffect","addItem","updateItem","removeItem","updateData","setData","removeData","setLoading","setRes","setError","refresh","hasKey","obj","key","Object","keys","includes","state","action","results","append","rest","count","map","i","slug","filter","contactFields","whaFields","analyticsFields","fields","Setting","assign","StaffCrudModel","patchSite","values","this","patchPath","_path","GeneralSettingUpdateView","props","site","React","SharedDataCtx","settingSlug","settings","form","useForm","mapDataToFormValues","detail","setValues","r","Response","isSuccess","instance","sharedProps","title","back","className","SiteUpdateForm","text","ContactForm","WhatsappForm","AnalyticsForm","SettingForm","label","error","errors","contact_number","contact_number_display","required","name","placeholder","maxLength","contact_number_title","contact_email","whatsapp_link","whatsapp_link_title","ga_tracking","fb_pixel","children","context","onSubmit","e","preventDefault","forEach","field","patch","handleError","value","ctx","domain","disabled","Boolean","updateSite","minLength"],"sourceRoot":""}